<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 420" font-family="'Segoe UI', system-ui, sans-serif">
  <defs>
    <linearGradient id="bg4" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f1117"/>
      <stop offset="100%" style="stop-color:#1a1d2e"/>
    </linearGradient>
    <marker id="a1" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ef7b4d"/>
    </marker>
    <marker id="a2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50"/>
    </marker>
    <marker id="a3" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4fc3f7"/>
    </marker>
  </defs>

  <rect width="900" height="420" fill="url(#bg4)" rx="12"/>

  <text x="450" y="38" text-anchor="middle" fill="#fff" font-size="20" font-weight="700">ArgoCD GitOps Flow</text>
  <text x="450" y="58" text-anchor="middle" fill="#ef7b4d" font-size="12">Git is the single source of truth — cluster state always matches repo</text>

  <!-- GitHub Repo -->
  <rect x="30" y="90" width="180" height="180" rx="10" fill="#24292e" stroke="#4fc3f7" stroke-width="1.5"/>
  <rect x="30" y="90" width="180" height="30" rx="10" fill="#1a1f25"/>
  <text x="120" y="111" text-anchor="middle" fill="#4fc3f7" font-size="12" font-weight="700">GitHub Repo</text>
  <text x="120" y="138" text-anchor="middle" fill="#aaa" font-size="11">KadirSoft/ruby-ex</text>

  <rect x="48" y="148" width="144" height="22" rx="4" fill="#1a2a1a" stroke="#4caf50" stroke-width="1"/>
  <text x="120" y="163" text-anchor="middle" fill="#81c784" font-size="10">manifests/buildconfig.yaml</text>
  <rect x="48" y="174" width="144" height="22" rx="4" fill="#1a2a1a" stroke="#4caf50" stroke-width="1"/>
  <text x="120" y="189" text-anchor="middle" fill="#81c784" font-size="10">manifests/deployment.yaml</text>
  <rect x="48" y="200" width="144" height="22" rx="4" fill="#1a2a1a" stroke="#4caf50" stroke-width="1"/>
  <text x="120" y="215" text-anchor="middle" fill="#81c784" font-size="10">manifests/service.yaml</text>
  <rect x="48" y="226" width="144" height="22" rx="4" fill="#1a2a1a" stroke="#4caf50" stroke-width="1"/>
  <text x="120" y="241" text-anchor="middle" fill="#81c784" font-size="10">manifests/route.yaml</text>

  <!-- ArgoCD -->
  <rect x="340" y="90" width="220" height="180" rx="10" fill="#1a1200" stroke="#ef7b4d" stroke-width="2"/>
  <rect x="340" y="90" width="220" height="30" rx="10" fill="#e65100"/>
  <text x="450" y="111" text-anchor="middle" fill="#fff" font-size="13" font-weight="700">ArgoCD</text>

  <rect x="358" y="132" width="184" height="40" rx="6" fill="#2a1500" stroke="#ef7b4d" stroke-width="1"/>
  <text x="450" y="149" text-anchor="middle" fill="#ffcc80" font-size="10" font-weight="600">① Polls GitHub every 3min</text>
  <text x="450" y="163" text-anchor="middle" fill="#aaa" font-size="9">or instant via webhook</text>

  <rect x="358" y="180" width="184" height="40" rx="6" fill="#2a1500" stroke="#ef7b4d" stroke-width="1"/>
  <text x="450" y="197" text-anchor="middle" fill="#ffcc80" font-size="10" font-weight="600">② Compares Git vs Cluster</text>
  <text x="450" y="211" text-anchor="middle" fill="#aaa" font-size="9">detects drift / out of sync</text>

  <rect x="358" y="228" width="184" height="30" rx="6" fill="#1a2a1a" stroke="#4caf50" stroke-width="1"/>
  <text x="450" y="248" text-anchor="middle" fill="#4caf50" font-size="10" font-weight="600">③ Auto Sync → oc apply</text>

  <!-- OpenShift cluster -->
  <rect x="680" y="90" width="190" height="180" rx="10" fill="#1a0000" stroke="#cc0000" stroke-width="1.5"/>
  <rect x="680" y="90" width="190" height="30" rx="10" fill="#b71c1c"/>
  <text x="775" y="111" text-anchor="middle" fill="#fff" font-size="12" font-weight="700">OpenShift Cluster</text>
  <text x="775" y="135" text-anchor="middle" fill="#ffcccc" font-size="10">namespace: myproject</text>

  <rect x="695" y="148" width="160" height="22" rx="4" fill="#2a0000" stroke="#cc0000" stroke-width="1"/>
  <text x="775" y="163" text-anchor="middle" fill="#ef9a9a" font-size="10">BuildConfig</text>
  <rect x="695" y="174" width="160" height="22" rx="4" fill="#2a0000" stroke="#cc0000" stroke-width="1"/>
  <text x="775" y="189" text-anchor="middle" fill="#ef9a9a" font-size="10">Deployment</text>
  <rect x="695" y="200" width="160" height="22" rx="4" fill="#2a0000" stroke="#cc0000" stroke-width="1"/>
  <text x="775" y="215" text-anchor="middle" fill="#ef9a9a" font-size="10">Service</text>
  <rect x="695" y="226" width="160" height="22" rx="4" fill="#2a0000" stroke="#cc0000" stroke-width="1"/>
  <text x="775" y="241" text-anchor="middle" fill="#ef9a9a" font-size="10">Route</text>

  <!-- Arrows -->
  <!-- GitHub → ArgoCD (polls) -->
  <line x1="212" y1="150" x2="338" y2="170" stroke="#ef7b4d" stroke-width="2" marker-end="url(#a1)"/>
  <text x="268" y="148" text-anchor="middle" fill="#ef7b4d" font-size="10">polls / watches</text>

  <!-- ArgoCD → OpenShift (sync) -->
  <line x1="562" y1="200" x2="678" y2="200" stroke="#4caf50" stroke-width="2" marker-end="url(#a2)"/>
  <text x="620" y="192" text-anchor="middle" fill="#4caf50" font-size="10">oc apply</text>
  <text x="620" y="205" text-anchor="middle" fill="#4caf50" font-size="10">sync →</text>

  <!-- RBAC Note -->
  <rect x="340" y="295" width="530" height="50" rx="8" fill="#1a1a00" stroke="#ffc107" stroke-width="1.5"/>
  <text x="605" y="316" text-anchor="middle" fill="#ffc107" font-size="11" font-weight="600">⚠️ RBAC Required</text>
  <text x="605" y="333" text-anchor="middle" fill="#aaa" font-size="10">oc adm policy add-role-to-user admin system:serviceaccount:openshift-gitops:openshift-gitops-argocd-application-controller -n myproject</text>

  <!-- ArgoCD Application config -->
  <rect x="30" y="295" width="290" height="110" rx="10" fill="#1a1200" stroke="#ef7b4d" stroke-width="1.5"/>
  <text x="175" y="316" text-anchor="middle" fill="#ef7b4d" font-size="12" font-weight="700">ArgoCD App Config</text>
  <text x="52" y="338" fill="#aaa" font-size="10">Repo:      KadirSoft/ruby-ex</text>
  <text x="52" y="354" fill="#aaa" font-size="10">Path:      manifests/</text>
  <text x="52" y="370" fill="#aaa" font-size="10">Cluster:   https://kubernetes.default.svc</text>
  <text x="52" y="386" fill="#aaa" font-size="10">Namespace: myproject</text>
  <text x="52" y="402" fill="#4caf50" font-size="10">SyncPolicy: Automatic ✅</text>

  <!-- Sync status indicator -->
  <rect x="680" y="295" width="190" height="50" rx="8" fill="#1a2a1a" stroke="#4caf50" stroke-width="1.5"/>
  <text x="775" y="316" text-anchor="middle" fill="#4caf50" font-size="12" font-weight="700">✅ Synced</text>
  <text x="775" y="333" text-anchor="middle" fill="#aaa" font-size="10">Git = Cluster state</text>

  <!-- Out of sync indicator -->
  <rect x="680" y="355" width="190" height="50" rx="8" fill="#2a1a00" stroke="#f44336" stroke-width="1.5"/>
  <text x="775" y="376" text-anchor="middle" fill="#f44336" font-size="12" font-weight="700">⚠️ OutOfSync</text>
  <text x="775" y="393" text-anchor="middle" fill="#aaa" font-size="10">Git ≠ Cluster → auto fix</text>
</svg>
